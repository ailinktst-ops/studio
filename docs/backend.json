
{
  "entities": {
    "Counter": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Counter",
      "type": "object",
      "description": "Estado global do contador, incluindo participantes, configurações de marca, estado de sorteio, mensagens de correio elegante, pedidos de música, redes sociais e piadinhas.",
      "properties": {
        "id": { "type": "string" },
        "title": { "type": "string", "description": "Título do evento." },
        "brandName": { "type": "string", "description": "Nome da marca/festa." },
        "brandIcon": { "type": "string", "description": "ID do ícone Lucide selecionado." },
        "brandImageUrl": { "type": "string", "description": "URL em Base64 da logo personalizada." },
        "admins": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "username": { "type": "string" },
              "password": { "type": "string" }
            }
          }
        },
        "socialLinks": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "id": { "type": "string" },
              "type": { "type": "string", "enum": ["instagram", "youtube"] },
              "url": { "type": "string" }
            }
          }
        },
        "participants": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "id": { "type": "string" },
              "name": { "type": "string" },
              "count": { "type": "number" },
              "category": { "type": "string" },
              "imageUrl": { "type": "string", "description": "Foto do participante em Base64." },
              "status": { "type": "string", "enum": ["pending", "approved"] }
            }
          }
        },
        "messages": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "id": { "type": "string" },
              "from": { "type": "string" },
              "to": { "type": "string" },
              "content": { "type": "string" },
              "status": { "type": "string", "enum": ["pending", "approved", "rejected"] },
              "timestamp": { "type": "number" }
            }
          }
        },
        "musicRequests": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "id": { "type": "string" },
              "artist": { "type": "string" },
              "song": { "type": "string" },
              "status": { "type": "string", "enum": ["pending", "approved", "rejected"] },
              "timestamp": { "type": "number" }
            }
          }
        },
        "jokes": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "id": { "type": "string" },
              "name": { "type": "string" },
              "audioUrl": { "type": "string" },
              "imageUrl": { "type": "string" },
              "timestamp": { "type": "number" }
            }
          }
        },
        "categories": { "type": "array", "items": { "type": "string" } },
        "customPhrases": { "type": "array", "items": { "type": "string" } },
        "raffle": {
          "type": "object",
          "properties": {
            "isRaffling": { "type": "boolean" },
            "winnerId": { "type": "string", "nullable": true },
            "candidates": { "type": "array", "items": { "type": "string" } },
            "winnersHistory": { "type": "array", "items": { "type": "string" } }
          }
        },
        "challenge": {
          "type": "object",
          "properties": {
            "isRaffling": { "type": "boolean" },
            "winnerId": { "type": "string", "nullable": true },
            "candidates": { "type": "array", "items": { "type": "string" } },
            "winnersHistory": { "type": "array", "items": { "type": "string" } }
          }
        },
        "activeMessageId": { "type": "string", "nullable": true },
        "piadinha": {
          "type": "object",
          "properties": {
            "audioUrl": { "type": "string" },
            "imageUrl": { "type": "string" },
            "isActive": { "type": "boolean" },
            "timestamp": { "type": "number" }
          }
        },
        "announcement": {
          "type": "object",
          "properties": {
            "message": { "type": "string" },
            "isActive": { "type": "boolean" },
            "timestamp": { "type": "number" }
          }
        },
        "socialAnnouncement": {
          "type": "object",
          "properties": {
            "type": { "type": "string", "enum": ["instagram", "youtube"] },
            "url": { "type": "string" },
            "isActive": { "type": "boolean" },
            "timestamp": { "type": "number" }
          }
        },
        "updatedAt": { "type": "string", "format": "date-time" }
      }
    }
  },
  "auth": {
    "providers": ["anonymous"]
  },
  "firestore": {
    "structure": [
      {
        "path": "/counters/{counterId}",
        "definition": {
          "entityName": "Counter",
          "schema": { "$ref": "#/backend/entities/Counter" }
        }
      }
    ],
    "reasoning": "Utilizamos um modelo de documento único para o contador para garantir que todas as atualizações sejam propagadas instantaneamente."
  }
}
